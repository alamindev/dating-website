$(document).ready(function(){var t=$("#main__user_id").data("id"),e=$("meta[name=csrf_token]").attr("content"),a=$(".loader"),s=$(".about__us"),o=$(".posts"),i=$(".follow__followers"),l=$(".follow__following"),n=$(".contents");if(location.search||c("?type=posts"),"about"===r()||"posts"===r()||"followers"===r()||"following"===r()){var d=r();"about"===d?m():"posts"===d?u():"followers"===d?v():"following"===d&&f()}function c(t){var e=window.location.protocol+"//"+window.location.host+window.location.pathname+t;return window.history.pushState({path:e},"",e)}function r(){var t={};return $.each(document.location.search.substr(1).split("&"),function(e,a){var s=a.split("=");t[s[0].toString()]=s[1].toString()}),t.type}function m(){return $.ajax({url:ajax_url,beforeSend:function(){$('<div class="w-100 d-flex justify-content-center align-items-center"></div>').html('<div class="LoaderBalls mt-5"><div class="LoaderBalls__item"></div><div class="LoaderBalls__item"></div><div class="LoaderBalls__item"></div></div>').appendTo(a),n.empty()},data:{action:"about_us_section",id:t,_token:e},dataType:"JSON",type:"POST",context:this,success:function(t){"success"===t.status?$(' <div class="pl-3 w-100"> </div>').html(t.html).appendTo(n):$('<div class="w-100 d-flex justify-content-center align-items-center text-danger"></div>').html("Something went wrong!").appendTo(n)},complete:function(){a.empty()}})}function u(){return $.ajax({url:ajax_url,beforeSend:function(){$('<div class="w-100 d-flex justify-content-center align-items-center"></div>').html('<div class="LoaderBalls mt-5"><div class="LoaderBalls__item"></div><div class="LoaderBalls__item"></div><div class="LoaderBalls__item"></div></div>').appendTo(a),n.empty()},data:{action:"fetch_user_photos",id:t,_token:e},dataType:"JSON",type:"POST",context:this,success:function(t){if("success"===t.status){$.isEmptyObject(t.user.photos)&&(a.empty(),$.toast({heading:"Warning",text:"Data not found!",icon:"warning",position:"bottom-right"})),$('<div class="pl-3" style="width: 98%;"></div>').html(t.html).appendTo(n),$(".add-photo").click(function(){$("#formUpload").trigger("reset"),$("#result").empty(),$("#upload-photo").click(),$("#upload-image").attr("value",""),$(".custom-alert").remove(),$(".btn__description").removeClass("d-block"),$(".cropper-wrapper").removeClass("d-none"),$(".btn__description").addClass("d-none"),$(".cropper-wrapper").addClass("d-block"),$("#btnCrop").removeClass("d-none"),$("#btnRestore").removeClass("d-none")});var s=$(".upload-progress");$(document).on("click","#upload-btn",function(t){""!=$("#upload-image").val()?$("#formUpload").ajaxForm({beforeSend:function(){s.css({opacity:1}),s.find(".progress-bar").css({width:0}),s.find(".progress-bar").attr("aria-valuenow",0)},uploadProgress:function(t,e,a,o){var i=o+"%";s.find(".progress-bar").css({width:i}),s.find(".progress-bar").attr("aria-valuenow",o)},complete:function(t){var e=JSON.parse(t.responseText);if("success"===e.status){var a='<div class="col-md-3 ipad-photo-img content__each">';a+='<div class="photo-item view-photo" data-id="'+e.id+'" data-url="'+e.file+'" style="background-image: url('+e.thumb+')"></div>',a+="</div>";var o=$(".content__each:first");o?o.after(a):$(".content__each").appendTo(a)}$("#modalUpload").find("textarea").val(""),$("#modalUpload").modal("hide"),s.find(".progress-bar").css({width:0}),s.find(".progress-bar").attr("aria-valuenow",0),s.css({opacity:0})}}):(t.preventDefault(),$(".alert-image").append('<p class="custom-alert m-0 p-0 ">Crop this image first</p>'))});var o=$("#canvas"),i=$("#result"),l="";$("#upload-photo").on("change",function(t){if($(this).get(0).files.length)if($("#modalUpload").modal("show"),$("#canvas").empty(),this.files&&this.files[0])if(this.files[0].type.match(/^image\//)){var e=new FileReader;e.onload=function(t){if(t.target.result){let e=document.createElement("img");e.id="image",e.src=t.target.result,o.innerHTML="",o.append(e),l=new Cropper(e,{viewMode:1,aspectRatio:4/3,minContainerWidth:500,minContainerHeight:375,movable:!0})}$("#btnCrop").click(function(){i.empty();var t=l.getCroppedCanvas().toDataURL("image/jpeg",.5);i.append($("<img>").attr("src",t)),$("#upload-image").attr("value",t),$(".custom-alert").remove(),$(".btn__description").removeClass("d-none"),$(".cropper-wrapper").removeClass("d-block"),$(".btn__description").addClass("d-block"),$(".cropper-wrapper").addClass("d-none"),$(this).addClass("d-none"),$("#btnRestore").addClass("d-none")}),$("#btnRestore").click(function(){$("#upload-image").attr("value",""),l.reset(),i.empty(),$(".custom-alert").remove()})},e.readAsDataURL(this.files[0])}else alert("Invalid file type! Please select an image file.");else alert("No file(s) selected.")});var d=[];$(".content__each").each(function(){d.push($(this).data("id"))});var c=$(".load_more_photo");d.length>=15?(c.removeClass("d-none"),c.addClass("d-block")):(c.addClass("d-none"),c.removeClass("d-block")),c.on("click",function(){var t=$(this),a=t.attr("data-id"),s=[];$(".content__each").each(function(){s.push($(this).data("id"))});$.ajax({url:ajax_url,beforeSend:function(){t.addClass("loading")},data:{action:"load_more_photo",id:a,data_id:s,item:15,_token:e},dataType:"JSON",type:"POST",context:this,success:function(t){$.isEmptyObject(t.datas)&&$.toast({heading:"Warning",text:"Data not found!",icon:"warning",position:"bottom-right"}),"success"===t.status&&$(".load__more_append").append(t.html)},complete:function(){t.removeClass("loading")}})})}else a.empty(),$('<div class="w-100 d-flex justify-content-center align-items-center text-danger"></div>').html("Something went wrong!").appendTo(n)},complete:function(){a.empty()}})}function v(){return $.ajax({url:ajax_url_follow,beforeSend:function(){$('<div class="w-100 d-flex justify-content-center align-items-center"></div>').html('<div class="LoaderBalls mt-5"><div class="LoaderBalls__item"></div><div class="LoaderBalls__item"></div><div class="LoaderBalls__item"></div></div>').appendTo(a),n.empty()},data:{action:"get_followers",id:t,logged_id:logged_id,_token:e},dataType:"JSON",type:"POST",context:this,success:function(s){if("success"===s.status){$.isEmptyObject(s.datas)&&($('<div class="text-center text-danger w-100 my-5"></div>').html("Data not found!").appendTo(n),$.toast({heading:"Warning",text:"Data not found!",icon:"warning",position:"bottom-right"})),$.map(s.datas,function(t){if(logged_id)if(""!=t.follow)var e='<button type="button" class="follow__btn" data-id="'+t.id+'"><div class="btn_text">'+t.follow+'</div> <div class="loading"></div></button>';else e="";else e="";t.avatar?$('<div class="col-lg-3 col-sm-4 col-6 mt-4"></div>').html('<div class="follow__content" data-id="'+t.id+'">                                <a href="/u/'+t.username+'">                                    <div class="d-flex justify-content-center mb-2" style="height: 100px" >                                        <img src="/'+t.avatar+'" alt="'+t.username+'" class="img-fluid rounded-circle" width="100">                                    </div>                                </a>                                <div class="d-flex justify-content-center align-items-center flex-column">                                    <a href="/u/'+t.username+'"><p class="follo__user_name">'+t.username+"</p></a>                                    "+e+"                                </div>                            </div>").appendTo(n):$('<div class="col-lg-3 col-sm-4 col-6 mt-4"></div>').html('<div class="follow__content" data-id="'+t.id+'">                                <a href="/u/'+t.username+'">                                    <div class="d-flex justify-content-center mb-2" style="height: 100px" >                                        <img src="/assets/images/1.jpg" alt="'+t.username+'" class="img-fluid rounded-circle" width="100">                                    </div>                                </a>                                <div class="d-flex justify-content-center align-items-center flex-column">                                    <a href="/u/'+t.username+'"><p class="follo__user_name">'+t.username+'</p></a>                                    <button type="button" class="follow__btn" data-id="'+t.id+'">                                            <div class="btn_text">'+t.follow+'</div>                                            <div class="loading"></div>                                        </button>                                </div>                            </div>').appendTo(n)});$(".btn_text"),$(".loading");$(".follow__btn").on("click",function(){var t=$(this).data("id"),a=$(this);$.ajax({url:ajax_url_follow,data:{action:"follow_following",id:t,_token:e},dataType:"JSON",type:"POST",context:this,success:function(t){"success"===t.status&&a.html(t.data)}})});var o=[];$(".follow__content").each(function(){o.push($(this).data("id"))});var i=$("#load__more_main");o.length>=10?$('<button class="custom__load_more_btn  mb-4" id="load__more"></button>').html("Load more").appendTo(i):i.empty(),$("#load__more").on("click",function(){var s=[];$(".follow__content").each(function(){s.push($(this).data("id"))});$.ajax({url:ajax_url_follow,beforeSend:function(){$('<div class="w-100 d-flex justify-content-center align-items-center"></div>').html('<div class="LoaderBalls mt-5"><div class="LoaderBalls__item"></div><div class="LoaderBalls__item"></div><div class="LoaderBalls__item"></div></div>').appendTo(a)},data:{action:"get_followers",id:t,data_id:s,logged_id:logged_id,item:10,_token:e},dataType:"JSON",type:"POST",context:this,success:function(t){"success"===t.status&&($.isEmptyObject(t.datas)&&$.toast({heading:"Warning",text:"Data not found!",icon:"warning",position:"bottom-right"}),$.map(t.datas,function(t){if(logged_id)if(""!=t.follow)var e='<button type="button" class="follow__btn" data-id="'+t.id+'"><div class="btn_text">'+t.follow+'</div> <div class="loading"></div></button>';else e="";else e="";t.avatar?$('<div class="col-lg-3 col-sm-4 col-6 mt-4"></div>').html('<div class="follow__content" data-id="'+t.id+'">                                                <a href="/u/'+t.username+'">                                                    <div class="d-flex justify-content-center mb-2" style="height: 100px" >                                                        <img src="/'+t.avatar+'" alt="'+t.username+'" class="img-fluid rounded-circle" width="100">                                                    </div>                                                </a>                                                <div class="d-flex justify-content-center align-items-center flex-column">                                                    <a href="/u/'+t.username+'"><p class="follo__user_name">'+t.username+"</p></a>                                                    "+e+"                                                </div>                                            </div>").appendTo(n):$('<div class="col-lg-3 col-sm-4 col-6 mt-4"></div>').html('<div class="follow__content" data-id="'+t.id+'">                                                <a href="/u/'+t.username+'">                                                    <div class="d-flex justify-content-center mb-2" style="height: 100px" >                                                        <img src="/assets/images/1.jpg" alt="'+t.username+'" class="img-fluid rounded-circle" width="100">                                                    </div>                                                </a>                                                <div class="d-flex justify-content-center align-items-center flex-column">                                                    <a href="/u/'+t.username+'"><p class="follo__user_name">'+t.username+"</p></a>                                                    "+e+"                                                </div>                                            </div>").appendTo(n)}))},complete:function(){a.empty()}})})}},complete:function(){a.empty()}})}function f(){return $.ajax({url:ajax_url_follow,beforeSend:function(){$('<div class="w-100 d-flex justify-content-center align-items-center"></div>').html('<div class="LoaderBalls mt-5"><div class="LoaderBalls__item"></div><div class="LoaderBalls__item"></div><div class="LoaderBalls__item"></div></div>').appendTo(a),n.empty()},data:{action:"get_following",id:t,logged_id:logged_id,_token:e},dataType:"JSON",type:"POST",context:this,success:function(s){if("success"===s.status){$.isEmptyObject(s.datas)&&($('<div class="text-center text-danger w-100 my-5"></div>').html("Data not found!").appendTo(n),$.toast({heading:"Warning",text:"Data not found!",icon:"warning",position:"bottom-right"})),$.map(s.datas,function(e){if(logged_id==t)if(""!=e.follow)var a='<button type="button" class="following__btn" data-id="'+e.id+'"><div class="btn_text">'+e.follow+'</div> <div class="loading"></div></button>';else a="";else if(logged_id)if(""!=e.follow)a='<button type="button" class="follow__btn" data-id="'+e.id+'"><div class="btn_text">'+e.follow+'</div> <div class="loading"></div></button>';else a="";else a="";e.avatar?$('<div class="col-lg-3 col-sm-4 col-6 mt-4"></div>').html('<div class="follow__content" data-id="'+e.id+'">                                <a href="/u/'+e.username+'">                                    <div class="d-flex justify-content-center mb-2" style="height: 100px" >                                        <img src="/'+e.avatar+'" alt="'+e.username+'" class="img-fluid rounded-circle" width="100">                                    </div>                                </a>                                <div class="d-flex justify-content-center align-items-center flex-column">                                    <a href="/u/'+e.username+'"><p class="follo__user_name">'+e.username+"</p></a>                                   "+a+"                                </div>                            </div>").appendTo(n):$('<div class="col-lg-3 col-sm-4 col-6 mt-4"></div>').html('<div class="follow__content" data-id="'+e.id+'">                                <a href="/u/'+e.username+'">                                    <div class="d-flex justify-content-center mb-2" style="height: 100px" >                                        <img src="/assets/images/1.jpg" alt="'+e.username+'" class="img-fluid rounded-circle" width="100">                                    </div>                                </a>                                <div class="d-flex justify-content-center align-items-center flex-column">                                    <a href="/u/'+e.username+'"><p class="follo__user_name">'+e.username+"</p></a>                                    "+a+"                                </div>                            </div>").appendTo(n)});$(".btn_text"),$(".loading");$(".contents").delegate(".following__btn","click",function(){var t=$(this).data("id"),a=$(this);$.ajax({url:ajax_url_follow,data:{action:"unfollowing",id:t,_token:e},dataType:"JSON",type:"POST",context:this,success:function(t){"success"===t.status&&(a.html(t.data),a.closest(".col-lg-3").remove())}})}),$(".follow__btn").on("click",function(){var t=$(this).data("id"),a=$(this);$.ajax({url:ajax_url_follow,data:{action:"follow_following",id:t,_token:e},dataType:"JSON",type:"POST",context:this,success:function(t){"success"===t.status&&a.html(t.data)}})});var o=[];$(".follow__content").each(function(){o.push($(this).data("id"))});var i=$("#load__more_main");o.length>=10?$('<button class="custom__load_more_btn  mb-4" id="load__more"></button>').html("Load more").appendTo(i):i.empty(),$("#load__more").on("click",function(){var s=[];$(".follow__content").each(function(){s.push($(this).data("id"))});$.ajax({url:ajax_url_follow,beforeSend:function(){$('<div class="w-100 d-flex justify-content-center align-items-center"></div>').html('<div class="LoaderBalls mt-5"><div class="LoaderBalls__item"></div><div class="LoaderBalls__item"></div><div class="LoaderBalls__item"></div></div>').appendTo(a)},data:{action:"get_following",id:t,data_id:s,logged_id:logged_id,item:10,_token:e},dataType:"JSON",type:"POST",context:this,success:function(e){"success"===e.status&&($.isEmptyObject(e.datas)&&$.toast({heading:"Warning",text:"Data not found!",icon:"warning",position:"bottom-right"}),$.map(e.datas,function(e){if(logged_id==t)if(""!=e.follow)var a='<button type="button" class="following__btn" data-id="'+e.id+'"><div class="btn_text">'+e.follow+'</div> <div class="loading"></div></button>';else a="";else if(logged_id)if(""!=e.follow)a='<button type="button" class="follow__btn" data-id="'+e.id+'"><div class="btn_text">'+e.follow+'</div> <div class="loading"></div></button>';else a="";else a="";e.avatar?$('<div class="col-lg-3 col-sm-4 col-6 mt-4"></div>').html('<div class="follow__content" data-id="'+e.id+'">                                                <a href="/u/'+e.username+'">                                                    <div class="d-flex justify-content-center mb-2" style="height: 100px" >                                                        <img src="/'+e.avatar+'" alt="'+e.username+'" class="img-fluid rounded-circle" width="100">                                                    </div>                                                </a>                                                <div class="d-flex justify-content-center align-items-center flex-column">                                                    <a href="/u/'+e.username+'"><p class="follo__user_name">'+e.username+"</p></a>                                                    "+a+"                                                </div>                                            </div>").appendTo(n):$('<div class="col-lg-3 col-sm-4 col-6 mt-4"></div>').html('<div class="follow__content" data-id="'+e.id+'">                                                <a href="/u/'+e.username+'">                                                    <div class="d-flex justify-content-center mb-2" style="height: 100px" >                                                        <img src="/assets/images/1.jpg" alt="'+e.username+'" class="img-fluid rounded-circle" width="100">                                                    </div>                                                </a>                                                <div class="d-flex justify-content-center align-items-center flex-column">                                                    <a href="/u/'+e.username+'"><p class="follo__user_name">'+e.username+"</p></a>                                                    "+a+"                                                </div>                                            </div>").appendTo(n)}))},complete:function(){a.empty()}})})}},complete:function(){a.empty()}})}"about"===r()?(s.addClass("active"),o.removeClass("active"),i.removeClass("active"),l.removeClass("active")):"posts"===r()?(s.removeClass("active"),o.addClass("active"),i.removeClass("active"),l.removeClass("active")):"followers"===r()?(s.removeClass("active"),o.removeClass("active"),i.addClass("active"),l.removeClass("active")):"following"===r()&&(s.removeClass("active"),o.removeClass("active"),i.removeClass("active"),l.addClass("active")),s.off("click").on("click",function(){n.empty(),a.empty(),$(".custom__load_more_btn").remove(),$(this).addClass("active"),o.removeClass("active"),i.removeClass("active"),l.removeClass("active"),c("?type=about"),m()}),o.off("click").on("click",function(){n.empty(),$(".custom__load_more_btn").remove(),a.empty(),$(this).addClass("active"),s.removeClass("active"),i.removeClass("active"),l.removeClass("active"),c("?type=posts"),u()}),i.off("click").on("click",function(){n.empty(),$(".custom__load_more_btn").remove(),a.empty(),$(this).addClass("active"),s.removeClass("active"),o.removeClass("active"),l.removeClass("active"),c("?type=followers"),v()}),l.off("click").on("click",function(){n.empty(),$(".custom__load_more_btn").remove(),a.empty(),$(this).addClass("active"),s.removeClass("active"),o.removeClass("active"),i.removeClass("active"),c("?type=following"),f()})});
