jQuery(document).ready(function(e){e(window).bind("popstate",function(){window.location.href=window.location.href});var t=e("meta[name=csrf_token]").attr("content");e(document).on("click",".conversations .message-box .list-messages ul li.message .view-chat-photo",function(t){var a=e(t.currentTarget).attr("data-view");e.fancybox.open([{src:a}])}),e(document).on("click",function(t){"list-emojis"!=e(t.target).closest("#list-emojis").attr("id")&&"emojis"!=e(t.target).closest("#emojis").attr("id")&&e(".conversations .message-box .write-message .emojis div.list-emojis").hide()}),e(document).on("click",".notifications .notification .close",function(t){e(t.currentTarget).parent().remove()}),e(document).on("click",".conversations .message-box .write-message .emojis .list-emojis a",function(t){var a=e(t.currentTarget);e(".conversations .message-box input.message-input").val(e(".conversations .message-box input.message-input").val()+" "+a.text())}),e(document).on("click",".conversations .message-box .write-message .emojis span",function(t){e(t.currentTarget);e(".conversations .message-box .write-message .emojis div.list-emojis").show()}),e(document).on("click",function(t){"list-emojis"!=e(t.target).closest("#list-emojis").attr("id")&&"emojis"!=e(t.target).closest("#emojis").attr("id")&&e(".status__message_main .emojis div.list-emojis").hide()}),e(document).on("click",".status__message_main .emojis span",function(t){e(t.currentTarget);e(".status__message_main .emojis div.list-emojis").show()}),e(document).on("click",".status__message_main .list-emojis a",function(t){var a=e(t.currentTarget);e(".status__input").val(e(".status__input").val()+a.html())}),e(document).on("click",".conversations .message-box .list-messages ul li.load_more_message",function(a){var o=e(a.currentTarget),i=o.attr("data-page");i=parseInt(i)+1;var s=o.attr("data-id");e.ajax({url:ajax_url,data:{action:"load_messages",page:i,id:s,_token:t},dataType:"JSON",type:"POST",success:function(e){"success"===e.status?(o.after(e.html),o.attr("data-page",i)):"empty"===e.status&&o.remove()}})}),e(".conversations .message-box .list-messages ul").length&&e(".conversations .message-box .list-messages ul").mCustomScrollbar().mCustomScrollbar("scrollTo","bottom",{scrollInertia:0}),e(".conversations .list-conversations ul").length&&e(".conversations .list-conversations ul").mCustomScrollbar().mCustomScrollbar(),e(".load_more_photo").click(function(a){var o=e(this);o.addClass("loading"),o.attr("disabled",!0);var i=o.attr("data-id"),s=o.attr("data-page");s=parseInt(s)+1,e.ajax({url:ajax_url,data:{id:i,page:s,_token:t,action:"load_photo"},type:"POST",dataType:"JSON",success:function(t){o.removeClass("loading"),"success"===t.status&&(o.removeAttr("disabled"),e(".main-photos .row").append(t.html),o.attr("data-page",s))}})}),e("#formQuick").submit(function(t){const a=[],o=e("#register-username").val(),i=e("#register-email").val(),s=e("#quick-gender").val(),n=e("#quick-pass").val(),r=e("#quick-country").val();if(""===o&&a.push("Username is required"),e("#register-username").hasClass("invalid")&&a.push("Username already exist"),o.length<6&&a.push("Username must be at least 6 characters"),""===i&&a.push("Email is required"),function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}(i)||a.push("Email is invalid"),e("#register-email").hasClass("invalid")&&a.push("Email already exist"),""===s&&a.push("Gender is required"),""===r&&a.push("Location is required"),""===n&&a.push("Password is required"),n.length<6&&a.push("Password must be at least 6 characters"),a.length){var l='<div class="alert alert-warning alert-dismissible fade show text-left p-1" role="alert"><ul class="mb-0 pl-1 list-unstyled text-small">';return e.each(a,function(e,t){l+="<li>- "+t+"</li>"}),l+='</ul><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>',e("#formQuick").prepend(l),setTimeout(function(){e("#formQuick .alert").remove()},3e3),!1}}),e(document).on("click",".close-view-photo",function(){e("#modalPhoto").modal("hide")}),e(".btn-love").click(function(){var a=e(this),o=a.attr("data-id"),i=a.attr("data-type");e.ajax({url:ajax_url,data:{action:"love",_token:t,id:o,type:i},dataType:"JSON",type:"POST",success:function(t){if("success"===t.status)if("old"==t.type){var o=a.hasClass("active");e(".btn-love, .btn-unlove").removeClass("active"),o||a.addClass("active")}else a.addClass("active");else"login"===t.status&&(e(".modal").modal("hide"),e("#modalLogin").modal("show"))}})}),e(document).on("click",".btn-follow",function(a){var i=e(a.currentTarget),s=i.attr("data-id");e.ajax({url:ajax_url,data:{_token:t,action:"follow",id:s},dataType:"JSON",type:"POST",success:function(t){"success"===t.status?"self"===t.type?o("You can not follow your self"):"unfollow"==t.type?i.html("Follow"):i.html('<i class="fas fa-check"></i> Followed'):"login"===t.status&&(e(".modal").modal("hide"),e("#modalLogin").modal("show"))}})}),e(document).on("keyup",".view-photo-right .photo-action .write-comment",function(a){var o=e(a.currentTarget),i=a.keyCode?a.keyCode:a.which,s=o.attr("data-id");if(13===i){a.preventDefault(),o.val(o.val().replace(/\r?\n/gi,""));var n=o.val();return""!==n&&e.ajax({url:ajax_url,data:{id:s,action:"comment_photo",text:n,_token:t},dataType:"JSON",type:"POST",success:function(t){"success"===t.status?(e(".view-photo-right .comments ul .mCSB_container ").append(t.html),e(".view-photo-right .comments ul").mCustomScrollbar("update"),setTimeout(function(){e(".view-photo-right .comments ul").mCustomScrollbar("scrollTo","bottom")},1e3),o.val("")):"login"===t.status&&(e(".modal").modal("hide"),e("#modalLogin").modal("show"))}}),!1}}),e(document).on("click",".view-photo-right .photo-action .like-photo .fa-heart",function(a){var o=e(a.currentTarget),i=o.attr("data-id"),s=o.parent().find("span").text();""==s&&(s=0),s=parseInt(s),e.ajax({url:ajax_url,data:{action:"like_photo",id:i,_token:t},dataType:"JSON",type:"POST",success:function(t){"success"===t.status?"like"===t.type?(s+=1,o.removeClass("far"),o.addClass("fas"),o.parent().find("span").text(s)):(o.removeClass("fas"),o.addClass("far"),0===(s-=1)?o.parent().find("span").empty():o.parent().find("span").text(s)):"login"===t.status&&(e(".modal").modal("hide"),e("#modalLogin").modal("show"))}})}),e(document).on("click",".photo-item.view-photo",function(a){var o=e(a.currentTarget),i=o.attr("data-id"),s=(o.attr("data-url"),e("#modalPhoto .modal-body"));s.empty(),e.ajax({url:ajax_url,data:{action:"view_photo",_token:t,id:i},dataType:"JSON",type:"POST",success:function(t){if("success"==t.status){s.append(t.html),e("#modalPhoto").modal("show").css({opacity:0}),e(".view-photo-right .comments ul").mCustomScrollbar().mCustomScrollbar("scrollTo","bottom",{scrollInertia:0});s.find(".full_photo").width();e(".view-photo-right .content-photo").mCustomScrollbar("scrollTo","100%"),e("#modalPhoto").css({opacity:1})}}})}),e(document).on("click",".edit-delete-content-photo",function(t){e(".show-delete-btn").toggleClass("showing"),e(".show-edit-delete-btn").toggleClass("option-showing"),t.stopPropagation()}),e(document).on("click",".show-delete-btn",function(e){e.stopPropagation()}),e(document).on("click",".delete-photo",function(a){if(confirm("Are you sure?")){var o=e(a.currentTarget).attr("data-photo-id");e.ajax({url:ajax_url,data:{action:"delete_photo",_token:t,id:o},dataType:"JSON",type:"POST",success:function(e){"deleted"==e.status&&(window.location=window.location.href)}}),a.stopPropagation()}return!1}),e(document).on("click",function(t){e(".show-delete-btn").removeClass("showing")}),e(document).on("click",".edit-details",function(t){e(".edit-description-option").show(),e(".edit-description").focus(),e(".details-hide").hide(),e(".show-delete-btn").removeClass("showing"),e(".edit-comment-option").hide(),e(".comment-hide").show()}),e(document).on("keyup",".edit-description",function(a){var o=e(a.currentTarget),i=a.keyCode?a.keyCode:a.which,s=o.attr("data-photo-id");if(13===i){a.preventDefault(),o.val(o.val().replace(/\r?\n/gi,""));var n=o.val();return e.ajax({url:ajax_url,data:{id:s,action:"update_description",text:n,_token:t},dataType:"JSON",type:"POST",success:function(t){"success"===t.status&&(e(".details-hide").text(t.text),e(".edit-description-option").hide(),e(".details-hide").show())}}),!1}}),e(document).on("click",".edit-delete-comment",function(t){e(".show-edit-delete-btn").removeClass("option-showing"),e(".show-delete-btn").removeClass("showing"),e(this).find(".show-edit-delete-btn").toggleClass("option-showing"),t.stopPropagation()}),e(document).on("click",".show-edit-delete-btn",function(e){e.stopPropagation()}),e(document).on("click",".delete-comment",function(a){if(confirm("Are you sure?")){var o=e(a.currentTarget).attr("data-comment-id");e.ajax({url:ajax_url,data:{action:"delete_comment",_token:t,id:o},dataType:"JSON",type:"POST"}),e(this).closest("li").remove(),a.stopPropagation()}return!1}),e(document).on("click",function(t){e(".show-edit-delete-btn").removeClass("option-showing")}),e(document).on("click",".edit-comment",function(t){e(".edit-description-option").hide(),e(".details-hide").show(),e(this).closest("li").find(".edit-comment-option").show(),e(this).closest("li").find(".edit-comment").focus(),e(this).closest("li").find(".comment-hide").hide(),e(this).closest("li").find(".show-edit-delete-btn").removeClass("option-showing")}),e(document).on("keyup",".edit-comment-text",function(a){var o=e(a.currentTarget),i=a.keyCode?a.keyCode:a.which,s=o.attr("data-comment-id");if(13===i){a.preventDefault(),o.val(o.val().replace(/\r?\n/gi,""));var n=o.val();return e.ajax({url:ajax_url,data:{id:s,action:"update_comment",text:n,_token:t},dataType:"JSON",type:"POST",context:this,success:function(t){"success"===t.status&&(e(this).closest("li").find(".comment-hide").text(t.text),e(this).closest("li").find(".edit-comment-option").hide(),e(this).closest("li").find(".comment-hide").show())}}),!1}}),e(document).on("click",".photo-item-cover.view-photo",function(a){var o=e(a.currentTarget),i=o.attr("data-id"),s=(o.attr("data-url"),e("#modalPhoto .modal-body"));s.empty(),e.ajax({url:ajax_url,data:{action:"view_cover_photo",_token:t,id:i},dataType:"JSON",type:"POST",success:function(t){if("success"==t.status){s.append(t.html),e("#modalPhoto").modal("show").css({opacity:0}),e(".view-photo-right .content-photo").mCustomScrollbar();s.find(".full_photo").width();e(".view-photo-right .content-photo").mCustomScrollbar("scrollTo","100%"),e("#modalPhoto").css({opacity:1})}}})}),e(document).on("click",".search-content .pagination .page-link",function(a){var o=e(a.currentTarget);if(!o.hasClass("active")){var i=o.attr("data-page"),s=e("#formFilter").serialize(),n="",r="";(function(){for(var e=new Array(10),t=window.location.search.substring(1).split("&"),a=0;a<t.length;a++){var o=t[a].indexOf("=");if(o>0){t[a].substring(0,o);var i=t[a].substring(o+1);e[a]=i}}e[0],n=e[1],r=e[2],e[3]})();e.ajax({url:ajax_url,data:s,dataType:"HTML",type:"POST",beforeSend:function(e,a){a.data+="&action=search_more&page="+i+"&_token="+t+"&preference1"+n+"&preference2"+r},success:function(t){return e(".search-content").empty(),e(".search-content").append(t),!1}})}return!1}),e("#register-birthday").length&&e("#register-birthday").datepicker({format:"yyyy-mm-dd",endDate:"-15y"});var a=e(".loader"),o=e(".username-error");e("#register-username").on("keyup",function(i){var s=e(this).val();a.empty(),o.empty(),""!=s?s.trim().length>=6?(o.empty(),e.ajax({url:ajax_url,beforeSend:function(){e('<div class="lds-ellipsis" style="height: 40px; margin-top: -20px;"></div>').html("<div></div><div></div><div></div><div></div>").appendTo(a),o.empty()},data:{action:"check_username",username:s,_token:t},dataType:"JSON",type:"POST",success:function(t){o.empty(),"error"==t.status?(e("#step-btn-1").attr("disabled",!0),e('<div class="text-danger"></div>').html("Username already exist! Try another Username.").appendTo(o)):(e("#step-btn-1").attr("disabled",!1),e('<div style="color: green !important"></div>').html("Great! You'r Choose good username. please goahead").appendTo(o))},complete:function(){a.empty()}})):e('<div class="text-danger"></div>').html("Please enter at least 6 charecter!").appendTo(o):(a.empty(),o.empty())});var i=e(".email-error");e("#register-email").on("keyup",function(a){var o=e(this).val();""!=o?!function(e){return new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(e)}(o)?(i.empty(),e('<div class="text-danger"></div>').html("Please enter valid email address!").appendTo(i)):(e(".loader-email").empty(),e.ajax({url:ajax_url,beforeSend:function(){e('<div class="lds-ellipsis" style="height: 40px; margin-top: -20px;"></div>').html("<div></div><div></div><div></div><div></div>").appendTo(e(".loader-email")),i.empty()},data:{action:"check_email",email:o,_token:t},dataType:"JSON",type:"POST",success:function(t){i.empty(),"error"==t.status?(e("#step-btn-1").attr("disabled",!0),e('<div class="text-danger"></div>').html("Email already exist! Try another Email.").appendTo(i)):(e("#step-btn-1").attr("disabled",!1),e('<div style="color: green !important"></div>').html("Great! Email is correct!").appendTo(i))},complete:function(){e(".loader-email").empty()}})):i.empty()});var s=e("#register-interests-input").length&&""!==e("#register-interests-input").val()?e("#register-interests-input").val().split(","):[];if(e(".interest-item").click(function(){var t=e(this).attr("data-id");e(this).hasClass("active")?s.splice(s.indexOf(t),1):s.push(t),e("#register-interests-input").val(s.join(",")),e(this).toggleClass("active")}),e(".nav-tabs .nav-item a").click(function(){if(!e(this).hasClass("confirmed"))return!1}),e(".nav-tabs .nav-item a.confirmed").click(function(t){t.preventDefault(),e(this).tab("show")}),e(".btn-interests").click(function(t){t.preventDefault();var a=e("#register-day").val(),o=e("#register-month").val(),i=e("#register-year").val(),s=e("#register-address").val(),n=e("#register-country").val(),r=[];if(""===a&&r.push("Day field is required"),""===o&&r.push("Month field is required"),""===i&&r.push("Year field is required"),""===s&&r.push("Address field is required"),""===n&&r.push("Country field is required"),r.length){var l='<div class="alert alert-warning alert-dismissible fade show" role="alert"><ul class="mb-0">';e.each(r,function(e,t){l+="<li>"+t+"</li>"}),l+='</ul><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>',e("#register-age").prepend(l),setTimeout(function(){e("#register-age .alert").remove()},3e3)}else e("#interest-tab").addClass("confirmed"),e("#interest-tab").click()}),e(".btn-about").click(function(t){t.preventDefault();var a=[];if(""===e("#register-interests-input").val()){a.push("Please choose some interests");var o='<div class="alert alert-warning alert-dismissible fade show" role="alert"><ul class="mb-0">';e.each(a,function(e,t){o+="<li>"+t+"</li>"}),o+='</ul><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>',e("#register-interests").prepend(o),setTimeout(function(){e("#register-interests .alert").remove()},3e3)}else e("#about-tab").addClass("confirmed"),e("#about-tab").click()}),e("#register-upload-avatar").length){var n=e("#register-avatar"),r=e("#register-upload-avatar"),l=r.attr("src");e(".register-upload-avatar .clear-avatar").click(function(){n.val(""),r.cropper("destroy").attr("src",l).cropper(d),e(this).hide()});var d={aspectRatio:1,cropBoxResizable:!1,minCropBoxWidth:250,minContainerWidth:250,minContainerHeight:250,viewMode:2,minCropBoxHeight:250,crop:function(t){e(".register-upload-avatar #x").val(t.detail.x),e(".register-upload-avatar #y").val(t.detail.y),e(".register-upload-avatar #w").val(t.detail.width),e(".register-upload-avatar #h").val(t.detail.height)}};r.on({ready:function(e){},cropstart:function(e){},cropmove:function(e){},cropend:function(e){},crop:function(e){},zoom:function(e){}}).cropper(d),n.change(function(){var t,a=this.files;r.data("cropper")&&a&&a.length&&(t=a[0],/^image\/\w+$/.test(t.type)?(uploadedImageURL&&URL.revokeObjectURL(uploadedImageURL),uploadedImageURL=URL.createObjectURL(t),r.cropper("destroy").attr("src",uploadedImageURL).cropper(d),e(".register-upload-avatar .clear-avatar").show()):window.alert("Please choose an image file."))})}}),$(document).ready(function(){var e=$("meta[name=csrf_token]").attr("content");function t(){setTimeout(function(){$.ajax({url:ajax_url,data:{action:"update_user_video",data:{id:"{!! auth()->user()->id !!}",video:1},_token:e},dataType:"JSON",type:"POST"})},1e3)}function a(){}navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,void 0===navigator.mediaDevices.getUserMedia?navigator.getUserMedia({audio:!0,video:!0},t,a):navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(t).catch(a)});
