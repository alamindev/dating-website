jQuery(document).ready(function(t){t(window).bind("popstate",function(){window.location.href=window.location.href});var e=t("meta[name=csrf_token]").attr("content");if(logged_id)var a=io(socket_url,{path:"/node/socket.io",transports:["polling","websocket"]});t(document).on("click",".conversations .message-box .list-messages ul li.message .view-chat-photo",function(e){var a=t(e.currentTarget).attr("data-view");t.fancybox.open([{src:a}])}),t(document).on("click",function(e){"list-emojis"!=t(e.target).closest("#list-emojis").attr("id")&&"emojis"!=t(e.target).closest("#emojis").attr("id")&&t(".conversations .message-box .write-message .emojis div.list-emojis").hide()}),t(document).on("click",".notifications .notification .close",function(e){t(e.currentTarget).parent().remove()}),t(document).on("click",".conversations .message-box .write-message .emojis .list-emojis a",function(e){var a=t(e.currentTarget);t(".conversations .message-box input.message-input").val(t(".conversations .message-box input.message-input").val()+" "+a.text())}),t(document).on("click",".conversations .message-box .write-message .emojis span",function(e){t(e.currentTarget);t(".conversations .message-box .write-message .emojis div.list-emojis").show()}),t(document).on("click",function(e){"list-emojis"!=t(e.target).closest("#list-emojis").attr("id")&&"emojis"!=t(e.target).closest("#emojis").attr("id")&&t(".status__message_main .emojis div.list-emojis").hide()}),t(document).on("click",".status__message_main .emojis span",function(e){t(e.currentTarget);t(".status__message_main .emojis div.list-emojis").show()}),t(document).on("click",".status__message_main .list-emojis a",function(e){var a=t(e.currentTarget);t(".status__input").val(t(".status__input").val()+a.html())}),t(document).on("click",".conversations .message-box .list-messages ul li.load_more_message",function(a){var o=t(a.currentTarget),i=o.attr("data-page");i=parseInt(i)+1;var s=o.attr("data-id");t.ajax({url:ajax_url,data:{action:"load_messages",page:i,id:s,_token:e},dataType:"JSON",type:"POST",success:function(t){"success"===t.status?(o.after(t.html),o.attr("data-page",i)):"empty"===t.status&&o.remove()}})}),t(".conversations .message-box .list-messages ul").length&&t(".conversations .message-box .list-messages ul").mCustomScrollbar().mCustomScrollbar("scrollTo","bottom",{scrollInertia:0}),t(".conversations .list-conversations ul").length&&t(".conversations .list-conversations ul").mCustomScrollbar().mCustomScrollbar(),t(".load_more_photo").click(function(a){var o=t(this);o.addClass("loading"),o.attr("disabled",!0);var i=o.attr("data-id"),s=o.attr("data-page");s=parseInt(s)+1,t.ajax({url:ajax_url,data:{id:i,page:s,_token:e,action:"load_photo"},type:"POST",dataType:"JSON",success:function(e){o.removeClass("loading"),"success"===e.status&&(o.removeAttr("disabled"),t(".main-photos .row").append(e.html),o.attr("data-page",s))}})}),t("#formQuick").submit(function(e){const a=[],o=t("#register-username").val(),i=t("#register-email").val(),s=t("#quick-gender").val(),n=t("#quick-pass").val(),r=t("#quick-country").val();if(""===o&&a.push("Username is required"),t("#register-username").hasClass("invalid")&&a.push("Username already exist"),o.length<6&&a.push("Username must be at least 6 characters"),""===i&&a.push("Email is required"),function(t){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase())}(i)||a.push("Email is invalid"),t("#register-email").hasClass("invalid")&&a.push("Email already exist"),""===s&&a.push("Gender is required"),""===r&&a.push("Location is required"),""===n&&a.push("Password is required"),n.length<6&&a.push("Password must be at least 6 characters"),a.length){var c='<div class="alert alert-warning alert-dismissible fade show text-left p-1" role="alert"><ul class="mb-0 pl-1 list-unstyled text-small">';return t.each(a,function(t,e){c+="<li>- "+e+"</li>"}),c+='</ul><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>',t("#formQuick").prepend(c),setTimeout(function(){t("#formQuick .alert").remove()},3e3),!1}}),t(document).on("click",".close-view-photo",function(){t("#modalPhoto").modal("hide")}),t(".btn-love").click(function(){var o=t(this),i=o.attr("data-id"),s=o.attr("data-type");t.ajax({url:ajax_url,data:{action:"love",_token:e,id:i,type:s},dataType:"JSON",type:"POST",success:function(s){if("success"===s.status)if("old"==s.type){var n=o.hasClass("active");t(".btn-love, .btn-unlove").removeClass("active"),n||o.addClass("active")}else o.addClass("active"),t.ajax({url:ajax_url_notification,data:{action:"page_like_notification",id:logged_id,notify_id:i,_token:e},dataType:"JSON",type:"POST",context:this,success:function(t){"success"===t.status&&a.emit("notifications","pageLike")}});else"login"===s.status&&(t(".modal").modal("hide"),t("#modalLogin").modal("show"))}})}),t(document).on("click",".btn-follow",function(o){var s=t(o.currentTarget),n=s.attr("data-id");t.ajax({url:ajax_url,data:{_token:e,action:"follow",id:n},dataType:"JSON",type:"POST",success:function(o){"success"===o.status?"self"===o.type?i("You can not follow your self"):"unfollow"==o.type?s.html("Follow"):(s.html('<i class="fas fa-check"></i> Followed'),t.ajax({url:ajax_url_notification,data:{action:"update_follow_notification",id:logged_id,follow_id:n,_token:e},dataType:"JSON",type:"POST",context:this,success:function(t){"success"===t.status&&a.emit("notifications","status")}})):"login"===o.status&&(t(".modal").modal("hide"),t("#modalLogin").modal("show"))}})}),t(document).on("keyup",".view-photo-right .photo-action .write-comment",function(o){var i=t(o.currentTarget),s=o.keyCode?o.keyCode:o.which,n=i.attr("data-id"),r=i.data("user-id");if(13===s){o.preventDefault(),i.val(i.val().replace(/\r?\n/gi,""));var c=i.val();return""!==c&&t.ajax({url:ajax_url,data:{id:n,action:"comment_photo",text:c,_token:e},dataType:"JSON",type:"POST",success:function(o){"success"===o.status?(t(".view-photo-right .comments ul .mCSB_container").append(o.html),t(".view-photo-right .comments ul").mCustomScrollbar("update"),setTimeout(function(){t(".view-photo-right .comments ul").mCustomScrollbar("scrollTo","bottom")},1e3),i.val(""),t.ajax({url:ajax_url_notification,data:{action:"photo_comment_notification",user_id:r,photo_id:n,_token:e},dataType:"JSON",type:"POST",context:this,success:function(t){"success"===t.status&&a.emit("notifications","comment")}})):"login"===o.status&&(t(".modal").modal("hide"),t("#modalLogin").modal("show"))}}),!1}}),t(document).on("click",".view-photo-right .photo-action .like-photo .fa-heart",function(o){var i=t(o.currentTarget),s=i.attr("data-id"),n=i.data("user-id"),r=i.parent().find("span").text();""==r&&(r=0),r=parseInt(r),t.ajax({url:ajax_url,data:{action:"like_photo",id:s,_token:e},dataType:"JSON",type:"POST",success:function(o){"success"===o.status?"like"===o.type?(r+=1,i.removeClass("far"),i.addClass("fas"),i.parent().find("span").text(r),t.ajax({url:ajax_url_notification,data:{action:"photo_like_notification",user_id:n,photo_id:s,_token:e},dataType:"JSON",type:"POST",context:this,success:function(t){"success"===t.status&&a.emit("notifications","likes")}})):(i.removeClass("fas"),i.addClass("far"),0===(r-=1)?i.parent().find("span").empty():i.parent().find("span").text(r)):"login"===o.status&&(t(".modal").modal("hide"),t("#modalLogin").modal("show"))}})}),t(document).on("click",".view-photo",function(a){var o=t(a.currentTarget),i=o.attr("data-id"),s=(o.attr("data-url"),t(this).data("notify_id")),n=t("#modalPhoto .modal-body");n.empty(),t.ajax({url:ajax_url,data:{action:"view_photo",_token:e,id:i},dataType:"JSON",type:"POST",success:function(a){if("success"==a.status){logged_id&&s&&(t.ajax({url:ajax_url_notification,data:{action:"notification_view",id:s,_token:e},dataType:"JSON",type:"POST"}),t.ajax({url:ajax_url_notification,data:{action:"notification_count",_token:e},dataType:"JSON",type:"POST",success:function(e){"success"===e.status&&(t(".notification").removeClass("clicked"),0!=e.data?t("#update__badge").html(e.data):t("#update__badge").empty())}})),n.append(a.html),t("#modalPhoto").modal("show").css({opacity:0}),t(".view-photo-right .comments ul").mCustomScrollbar().mCustomScrollbar("scrollTo","bottom",{scrollInertia:0});n.find(".full_photo").width();t(".view-photo-right .content-photo").mCustomScrollbar("scrollTo","100%"),t("#modalPhoto").css({opacity:1})}}})}),t(document).on("click",".edit-delete-content-photo",function(e){t(".show-delete-btn").toggleClass("showing"),t(".show-edit-delete-btn").toggleClass("option-showing"),e.stopPropagation()}),t(document).on("click",".show-delete-btn",function(t){t.stopPropagation()}),t(document).on("click",".delete-photo",function(a){if(confirm("Are you sure?")){var o=t(a.currentTarget).attr("data-photo-id");t.ajax({url:ajax_url,data:{action:"delete_photo",_token:e,id:o},dataType:"JSON",type:"POST",success:function(t){"deleted"==t.status&&(window.location=window.location.href)}}),a.stopPropagation()}return!1}),t(document).on("click",function(e){t(".show-delete-btn").removeClass("showing")}),t(document).on("click",".edit-details",function(e){t(".edit-description-option").show(),t(".edit-description").focus(),t(".details-hide").hide(),t(".show-delete-btn").removeClass("showing"),t(".edit-comment-option").hide(),t(".comment-hide").show()}),t(document).on("keyup",".edit-description",function(a){var o=t(a.currentTarget),i=a.keyCode?a.keyCode:a.which,s=o.attr("data-photo-id");if(13===i){a.preventDefault(),o.val(o.val().replace(/\r?\n/gi,""));var n=o.val();return t.ajax({url:ajax_url,data:{id:s,action:"update_description",text:n,_token:e},dataType:"JSON",type:"POST",success:function(e){"success"===e.status&&(t(".details-hide").text(e.text),t(".edit-description-option").hide(),t(".details-hide").show())}}),!1}}),t(document).on("click",".edit-delete-comment",function(e){t(".show-edit-delete-btn").removeClass("option-showing"),t(".show-delete-btn").removeClass("showing"),t(this).find(".show-edit-delete-btn").toggleClass("option-showing"),e.stopPropagation()}),t(document).on("click",".show-edit-delete-btn",function(t){t.stopPropagation()}),t(document).on("click",".delete-comment",function(a){if(confirm("Are you sure?")){var o=t(a.currentTarget).attr("data-comment-id");t.ajax({url:ajax_url,data:{action:"delete_comment",_token:e,id:o},dataType:"JSON",type:"POST"}),t(this).closest("li").remove(),a.stopPropagation()}return!1}),t(document).on("click",function(e){t(".show-edit-delete-btn").removeClass("option-showing")}),t(document).on("click",".edit-comment",function(e){t(".edit-description-option").hide(),t(".details-hide").show(),t(this).closest("li").find(".edit-comment-option").show(),t(this).closest("li").find(".edit-comment").focus(),t(this).closest("li").find(".comment-hide").hide(),t(this).closest("li").find(".show-edit-delete-btn").removeClass("option-showing")}),t(document).on("keyup",".edit-comment-text",function(a){var o=t(a.currentTarget),i=a.keyCode?a.keyCode:a.which,s=o.attr("data-comment-id");if(13===i){a.preventDefault(),o.val(o.val().replace(/\r?\n/gi,""));var n=o.val();return t.ajax({url:ajax_url,data:{id:s,action:"update_comment",text:n,_token:e},dataType:"JSON",type:"POST",context:this,success:function(e){"success"===e.status&&(t(this).closest("li").find(".comment-hide").text(e.text),t(this).closest("li").find(".edit-comment-option").hide(),t(this).closest("li").find(".comment-hide").show())}}),!1}}),t(document).on("click",".photo-item-cover.view-photo",function(a){var o=t(a.currentTarget),i=o.attr("data-id"),s=(o.attr("data-url"),t("#modalPhoto .modal-body"));s.empty(),t.ajax({url:ajax_url,data:{action:"view_cover_photo",_token:e,id:i},dataType:"JSON",type:"POST",success:function(e){if("success"==e.status){s.append(e.html),t("#modalPhoto").modal("show").css({opacity:0}),t(".view-photo-right .content-photo").mCustomScrollbar();s.find(".full_photo").width();t(".view-photo-right .content-photo").mCustomScrollbar("scrollTo","100%"),t("#modalPhoto").css({opacity:1})}}})}),t(document).on("click",".search-content .pagination .page-link",function(a){var o=t(a.currentTarget);if(!o.hasClass("active")){var i=o.attr("data-page"),s=t("#formFilter").serialize(),n="",r="";(function(){for(var t=new Array(10),e=window.location.search.substring(1).split("&"),a=0;a<e.length;a++){var o=e[a].indexOf("=");if(o>0){e[a].substring(0,o);var i=e[a].substring(o+1);t[a]=i}}t[0],n=t[1],r=t[2],t[3]})();t.ajax({url:ajax_url,data:s,dataType:"HTML",type:"POST",beforeSend:function(t,a){a.data+="&action=search_more&page="+i+"&_token="+e+"&preference1"+n+"&preference2"+r},success:function(e){return t(".search-content").empty(),t(".search-content").append(e),!1}})}return!1}),t("#register-birthday").length&&t("#register-birthday").datepicker({format:"yyyy-mm-dd",endDate:"-15y"});var o=t(".loader"),i=t(".username-error");t("#register-username").on("keyup",function(a){var s=t(this).val();o.empty(),i.empty(),""!=s?s.trim().length>=6?(i.empty(),t.ajax({url:ajax_url,beforeSend:function(){t('<div class="lds-ellipsis" style="height: 40px; margin-top: -20px;"></div>').html("<div></div><div></div><div></div><div></div>").appendTo(o),i.empty()},data:{action:"check_username",username:s,_token:e},dataType:"JSON",type:"POST",success:function(e){i.empty(),"error"==e.status?(t("#step-btn-1").attr("disabled",!0),t('<div class="text-danger"></div>').html("Username already exist! Try another Username.").appendTo(i)):(t("#step-btn-1").attr("disabled",!1),t('<div style="color: green !important"></div>').html("Great! You'r Choose good username. please goahead").appendTo(i))},complete:function(){o.empty()}})):t('<div class="text-danger"></div>').html("Please enter at least 6 charecter!").appendTo(i):(o.empty(),i.empty())});var s=t(".email-error");t("#register-email").on("keyup",function(a){var o=t(this).val();""!=o?!function(t){return new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(t)}(o)?(s.empty(),t('<div class="text-danger"></div>').html("Please enter valid email address!").appendTo(s)):(t(".loader-email").empty(),t.ajax({url:ajax_url,beforeSend:function(){t('<div class="lds-ellipsis" style="height: 40px; margin-top: -20px;"></div>').html("<div></div><div></div><div></div><div></div>").appendTo(t(".loader-email")),s.empty()},data:{action:"check_email",email:o,_token:e},dataType:"JSON",type:"POST",success:function(e){s.empty(),"error"==e.status?(t("#step-btn-1").attr("disabled",!0),t('<div class="text-danger"></div>').html("Email already exist! Try another Email.").appendTo(s)):(t("#step-btn-1").attr("disabled",!1),t('<div style="color: green !important"></div>').html("Great! Email is correct!").appendTo(s))},complete:function(){t(".loader-email").empty()}})):s.empty()});var n=t("#register-interests-input").length&&""!==t("#register-interests-input").val()?t("#register-interests-input").val().split(","):[];if(t(".interest-item").click(function(){var e=t(this).attr("data-id");t(this).hasClass("active")?n.splice(n.indexOf(e),1):n.push(e),t("#register-interests-input").val(n.join(",")),t(this).toggleClass("active")}),t(".nav-tabs .nav-item a").click(function(){if(!t(this).hasClass("confirmed"))return!1}),t(".nav-tabs .nav-item a.confirmed").click(function(e){e.preventDefault(),t(this).tab("show")}),t(".btn-interests").click(function(e){e.preventDefault();var a=t("#register-day").val(),o=t("#register-month").val(),i=t("#register-year").val(),s=t("#register-address").val(),n=t("#register-country").val(),r=[];if(""===a&&r.push("Day field is required"),""===o&&r.push("Month field is required"),""===i&&r.push("Year field is required"),""===s&&r.push("Address field is required"),""===n&&r.push("Country field is required"),r.length){var c='<div class="alert alert-warning alert-dismissible fade show" role="alert"><ul class="mb-0">';t.each(r,function(t,e){c+="<li>"+e+"</li>"}),c+='</ul><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>',t("#register-age").prepend(c),setTimeout(function(){t("#register-age .alert").remove()},3e3)}else t("#interest-tab").addClass("confirmed"),t("#interest-tab").click()}),t(".btn-about").click(function(e){e.preventDefault();var a=[];if(""===t("#register-interests-input").val()){a.push("Please choose some interests");var o='<div class="alert alert-warning alert-dismissible fade show" role="alert"><ul class="mb-0">';t.each(a,function(t,e){o+="<li>"+e+"</li>"}),o+='</ul><button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>',t("#register-interests").prepend(o),setTimeout(function(){t("#register-interests .alert").remove()},3e3)}else t("#about-tab").addClass("confirmed"),t("#about-tab").click()}),t("#register-upload-avatar").length){var r=t("#register-avatar"),c=t("#register-upload-avatar"),l=c.attr("src");t(".register-upload-avatar .clear-avatar").click(function(){r.val(""),c.cropper("destroy").attr("src",l).cropper(d),t(this).hide()});var d={aspectRatio:1,cropBoxResizable:!1,minCropBoxWidth:250,minContainerWidth:250,minContainerHeight:250,viewMode:2,minCropBoxHeight:250,crop:function(e){t(".register-upload-avatar #x").val(e.detail.x),t(".register-upload-avatar #y").val(e.detail.y),t(".register-upload-avatar #w").val(e.detail.width),t(".register-upload-avatar #h").val(e.detail.height)}};c.on({ready:function(t){},cropstart:function(t){},cropmove:function(t){},cropend:function(t){},crop:function(t){},zoom:function(t){}}).cropper(d),r.change(function(){var e,a=this.files;c.data("cropper")&&a&&a.length&&(e=a[0],/^image\/\w+$/.test(e.type)?(uploadedImageURL&&URL.revokeObjectURL(uploadedImageURL),uploadedImageURL=URL.createObjectURL(e),c.cropper("destroy").attr("src",uploadedImageURL).cropper(d),t(".register-upload-avatar .clear-avatar").show()):window.alert("Please choose an image file."))})}}),$(document).ready(function(){var t=$("meta[name=csrf_token]").attr("content");function e(){setTimeout(function(){$.ajax({url:ajax_url,data:{action:"update_user_video",data:{id:"{!! auth()->user()->id !!}",video:1},_token:t},dataType:"JSON",type:"POST"})},1e3)}function a(){}navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,void 0===navigator.mediaDevices.getUserMedia?navigator.getUserMedia({audio:!0,video:!0},e,a):navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(e).catch(a)});
